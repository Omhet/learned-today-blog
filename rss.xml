<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Vladimir Learned Today]]></title><description><![CDATA[Vladimir Ivanov's blog on interesting topics of web development]]></description><link>https://omhet.github.io/learned-today</link><generator>RSS for Node</generator><lastBuildDate>Tue, 27 Aug 2019 19:11:15 GMT</lastBuildDate><item><title><![CDATA[RegExp lookarounds in JavaScript]]></title><description><![CDATA[In this post, I’ll try to explain by simple examples what the thing is JS RegExp lookarounds. Let’s pretend you need to make a pin-code…]]></description><link>https://omhet.github.io/learned-today/lookarounds/</link><guid isPermaLink="false">https://omhet.github.io/learned-today/lookarounds/</guid><pubDate>Mon, 26 Aug 2019 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/vladimir-learned-today/static/a912abce3b3e11c8621fdd8576e07402/1f853/deer.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.796875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAgME/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAZqq0jrFwn//xAAZEAACAwEAAAAAAAAAAAAAAAABAgADIRH/2gAIAQEAAQUCFqBTasNyQHO5P//EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAEDAQE/AVf/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/Abhj/8QAGhAAAgIDAAAAAAAAAAAAAAAAABABITFBUf/aAAgBAQAGPwLpiTau1//EABkQAAMBAQEAAAAAAAAAAAAAAAABETFBsf/aAAgBAQABPyGeTofth6VYHoW44D0//9oADAMBAAIAAwAAABBUP//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxDFJ//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAgEBPxCWq//EABgQAQEBAQEAAAAAAAAAAAAAAAEhEQBh/9oACAEBAAE/EGAMZg8lghkHgMbZ52qAjyYqgVb1pvf/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Photo by Nathan Anderson on Unsplash&quot;
        title=&quot;Photo by Nathan Anderson on Unsplash&quot;
        src=&quot;/vladimir-learned-today/static/a912abce3b3e11c8621fdd8576e07402/c739e/deer.jpg&quot;
        srcset=&quot;/vladimir-learned-today/static/a912abce3b3e11c8621fdd8576e07402/8ee9c/deer.jpg 148w,
/vladimir-learned-today/static/a912abce3b3e11c8621fdd8576e07402/ebbe7/deer.jpg 295w,
/vladimir-learned-today/static/a912abce3b3e11c8621fdd8576e07402/c739e/deer.jpg 590w,
/vladimir-learned-today/static/a912abce3b3e11c8621fdd8576e07402/5413e/deer.jpg 885w,
/vladimir-learned-today/static/a912abce3b3e11c8621fdd8576e07402/1f853/deer.jpg 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In this post, I’ll try to explain by simple examples what the thing is JS RegExp lookarounds.&lt;/p&gt;
&lt;p&gt;Let’s pretend you need to make a pin-code style text input. Something like this one:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 532px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/vladimir-learned-today/static/b95d591452911008d45293355fee8072/86a13/pin.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 111.65413533834585%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAWABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHt3JqSjQOCP//EABYQAQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAQABBQJV3//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABYQAAMAAAAAAAAAAAAAAAAAAAEwMf/aAAgBAQAGPwKlP//EABoQAAMAAwEAAAAAAAAAAAAAAAABESExQdH/2gAIAQEAAT8hmfMgg6IWtkd5CMSfYf/aAAwDAQACAAMAAAAQUxC//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAECAQE/ECJz/8QAHhAAAgICAgMAAAAAAAAAAAAAAREAIUFhMVFxkfH/2gAIAQEAAT8QY2U2viAnDgMGHMrHhQm7d+oTAody2SegK5QbDxARcjoKf//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Simple pin-code style input&quot;
        title=&quot;Simple pin-code style input&quot;
        src=&quot;/vladimir-learned-today/static/b95d591452911008d45293355fee8072/86a13/pin.jpg&quot;
        srcset=&quot;/vladimir-learned-today/static/b95d591452911008d45293355fee8072/8ee9c/pin.jpg 148w,
/vladimir-learned-today/static/b95d591452911008d45293355fee8072/ebbe7/pin.jpg 295w,
/vladimir-learned-today/static/b95d591452911008d45293355fee8072/86a13/pin.jpg 532w&quot;
        sizes=&quot;(max-width: 532px) 100vw, 532px&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Noticed that all digits are dots except the last one? That’s really easy to implement with just one line of code using RegExp lookaround (negative lookahead in this case):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pin.replace(/\d(?!$)/g, ‘•’)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Well, what just happened here? We’ll figure it out, but firstly let’s review a simpler example.&lt;/p&gt;
&lt;p&gt;We have a Markdown string:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;- 1 potato for 2€
- 2 tomatoes for 3€
- 5 bananas for 4€&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let’s write a code that finds all digits before the euro sign. With lookarounds it can be done like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;str.match(/\d+(?=€)/g)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here’s what it means:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;\d+&lt;/strong&gt; One or more digits&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(?=€)&lt;/strong&gt; Followed by €&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That’s it! No brainer at all.&lt;/p&gt;
&lt;p&gt;That (&lt;strong&gt;?=&lt;/strong&gt;your_regexp) is called a &lt;strong&gt;positive lookahead&lt;/strong&gt;. You can interpret this like because it looks ahead with a positive attitude for what goes next.&lt;/p&gt;
&lt;p&gt;In the result you will get an array:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;[“2”, “3”, “4”]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that it returned what was before the lookahead, &lt;strong&gt;\d+&lt;/strong&gt; in our case. The € sign itself is not included in the resulting array.&lt;/p&gt;
&lt;p&gt;Now I want to find all digits that are not followed by € sign. That’s also very easy.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;str.match(/\d+(?!€)/g)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It’s a &lt;strong&gt;negative lookahead&lt;/strong&gt;. The main difference is &lt;strong&gt;!&lt;/strong&gt; sign instead of &lt;strong&gt;=&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;So, this one will return quantities:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;[“1”, “2”, “5”]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That’s precisely the digits I wanted.&lt;/p&gt;
&lt;p&gt;Now we can go back to our pin code example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pin.replace(/\d(?!$)/g, ‘•’)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;\d&lt;/strong&gt; Just a digit&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(?!$)&lt;/strong&gt; Not followed by an end of the line (&lt;strong&gt;$&lt;/strong&gt; in regexps is a special char meaning an end of the line)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Summing it up, find all digits that are not at the end of the line and replace them with ‘•’. Easy!&lt;/p&gt;
&lt;p&gt;Well, if there is a lookahead, there should be a lookbehind probably. And yes, there is one.&lt;/p&gt;
&lt;p&gt;Unlike €, $ is usually written before a digit.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;- 1 potato for $2
- 2 tomatoes for $3
- 5 bananas for $4&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To find values now, we need a bit different code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;str.match(/(?&amp;lt;=\$)\d+/g)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is called a &lt;strong&gt;positive lookbehind&lt;/strong&gt;. Then escaped &lt;strong&gt;$&lt;/strong&gt; sign (because we do not want to consider it as an end of the line, we escape it with a backslash).&lt;/p&gt;
&lt;p&gt;It finds all digits that are preceded by &lt;strong&gt;$&lt;/strong&gt; sign.&lt;/p&gt;
&lt;p&gt;On the other hand, there is a (&lt;strong&gt;?&amp;#x3C;!&lt;/strong&gt;your_regexp) &lt;strong&gt;negative lookbehind&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;str.match(/(?&amp;lt;!\$)\d+/g&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Which finds all digits that are not preceded by $ sign.&lt;/p&gt;
&lt;p&gt;To conclude, if you need to find something followed or not followed by something, use these ones:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Positive lookahead:&lt;/strong&gt; (?=your_regexp)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Negative lookahead:&lt;/strong&gt; (?!your_regexp)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you need to find something preceded or not preceded by something, use these ones:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Positive lookbehind:&lt;/strong&gt; (?&amp;#x3C;=your_regexp)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Negative lookbehind:&lt;/strong&gt; (?&amp;#x3C;!your_regexp)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To check all the examples yourself you can use &lt;a href=&quot;https://regex101.com/&quot;&gt;regex101&lt;/a&gt;. It’s a great place to test all your regexps.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;P.S. Be careful about using lookbehinds in JS as it has partial support on the moment of writing this post. Check &lt;a href=&quot;https://caniuse.com/#search=lookbehind&quot;&gt;caniuse&lt;/a&gt; to be sure.&lt;/em&gt;&lt;/p&gt;</content:encoded></item></channel></rss>